import{_ as k,a as g,b as w,d as i,o as u,h as e,t as o,i as r,l as m,v as p,q as b,s as c,g as v,f as V,p as x}from"./index-DZchovPR.js";const N={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},C={class:"lg:col-span-2"},T={class:"bg-white rounded-lg shadow-md p-6 mb-6"},S={class:"flex flex-col sm:flex-row gap-4"},j=["src"],q={class:"flex-1"},D={id:"tourName",class:"text-xl font-bold text-gray-800 mb-2"},M={class:"space-y-1 text-sm text-gray-600"},U={id:"tourDuration"},B={id:"tourDestination"},E={class:"bg-white rounded-lg shadow-md p-6 mb-6"},F={id:"bookingForm"},P={class:"mb-6"},A={key:0,class:"text-sm text-red-500 mt-1"},R={key:1,class:"text-sm text-gray-500 mt-1"},H={class:"mb-6"},$={class:"space-y-4"},z={key:0,class:"text-sm text-red-500 mt-1"},Q={class:"mb-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={key:0,class:"text-sm text-red-500 mt-1"},K={key:0,class:"text-sm text-red-500 mt-1"},L={key:0,class:"text-sm text-red-500 mt-1"},O={key:0,class:"text-sm text-red-500 mt-1"},Y={class:"mb-6"},G={class:"lg:col-span-1"},W={class:"bg-white rounded-lg shadow-md p-6 sticky top-24"},Z={class:"space-y-3 mb-4 pb-4 border-b"},ee={class:"flex justify-between text-sm"},te={class:"text-gray-600"},se={id:"summaryAdults"},le={class:"font-semibold",id:"summaryAdultsPrice"},ae={class:"space-y-2 mb-4 pb-4 border-b"},oe={class:"flex justify-between text-sm"},ne={class:"font-semibold",id:"subtotal"},re={class:"flex justify-between items-center mb-6"},de={class:"text-2xl font-bold text-blue-600",id:"totalPrice"},ie={id:"successModal",class:"hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},ue={class:"bg-white rounded-lg max-w-md w-full p-6 fade-in"},me={class:"text-center"},pe={class:"text-gray-600 mb-6"},be={class:"font-bold text-blue-600",id:"bookingCode"},y={__name:"booking",setup(ce){const s=g({full_name:"",email:"",phone:"",address:"",note:"",tour_id:"",booking_date:"",end_date:"",number_of_people:2}),f=g(""),l=g({}),h=()=>{l.value={};let a=!0;return s.value.full_name||(l.value.full_name="Vui lòng nhập họ và tên",a=!1),s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)||(l.value.email="Email không hợp lệ",a=!1):(l.value.email="Vui lòng nhập email",a=!1),s.value.phone?/^[0-9]{10}$/.test(s.value.phone)||(l.value.phone="Số điện thoại phải có 10 chữ số",a=!1):(l.value.phone="Vui lòng nhập số điện thoại",a=!1),s.value.address||(l.value.address="Vui lòng nhập địa chỉ",a=!1),s.value.booking_date||(l.value.booking_date="Vui lòng chọn ngày khởi hành",a=!1),(!s.value.number_of_people||s.value.number_of_people<1)&&(l.value.number_of_people="Số lượng khách không hợp lệ",a=!1),a},d=g(null),_=()=>{h()&&V.post("/api/booking",s.value).then(a=>{console.log(a),f.value=a.data.data.id,document.getElementById("successModal").classList.remove("hidden"),localStorage.removeItem("booking")}).catch(a=>{console.error(a)})};return w(()=>{const a=JSON.parse(localStorage.getItem("booking"));a&&(d.value=a.tour,s.value.tour_id=a.tour.id,s.value.booking_date=a.startDate,s.value.number_of_people=a.guests)}),(a,t)=>(u(),i("div",null,[e("div",N,[e("div",I,[e("div",C,[e("div",T,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"Thông tin tour",-1)),e("div",S,[e("img",{id:"tourImage",src:d.value?.thumbnail,alt:"Tour",class:"w-full sm:w-32 h-32 object-cover rounded-lg"},null,8,j),e("div",q,[e("h3",D,o(d.value?.title),1),e("div",M,[e("p",null,[t[8]||(t[8]=e("i",{class:"fas fa-clock mr-2 text-blue-600"},null,-1)),e("span",U,o(d.value?.duration_days)+" ngày "+o(d.value?.duration_days-1)+" đêm",1)]),e("p",null,[t[9]||(t[9]=e("i",{class:"fas fa-map-marker-alt mr-2 text-blue-600"},null,-1)),e("span",B,o(d.value?.location),1)]),t[10]||(t[10]=e("p",null,[e("i",{class:"fas fa-star mr-2 text-yellow-400"}),e("span",{id:"tourRating"},"4.8"),r(" (245 đánh giá)")],-1))])])])]),e("div",E,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"Thông tin đặt tour",-1)),e("form",F,[e("div",P,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},[r(" Ngày khởi hành "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=n=>s.value.booking_date=n),id:"departureDate",class:b([{"border-red-500":l.value.booking_date},"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:""},null,2),[[p,s.value.booking_date]]),l.value.booking_date?(u(),i("p",A,o(l.value.booking_date),1)):(u(),i("p",R,"Vui lòng chọn ngày khởi hành trong tương lai"))]),e("div",H,[t[13]||(t[13]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-3"},[r(" Số lượng khách "),e("span",{class:"text-red-500"},"*")],-1)),e("div",$,[m(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=n=>s.value.number_of_people=n),id:"number_of_people",class:b([{"border-red-500":l.value.number_of_people},"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:""},null,2),[[p,s.value.number_of_people]]),l.value.number_of_people?(u(),i("p",z,o(l.value.number_of_people),1)):c("",!0)])]),e("div",Q,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Thông tin liên hệ",-1)),e("div",X,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[r(" Họ và tên "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>s.value.full_name=n),id:"fullName",class:b([{"border-red-500":l.value.full_name},"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:"",placeholder:"Nguyễn Văn A"},null,2),[[p,s.value.full_name]]),l.value.full_name?(u(),i("p",J,o(l.value.full_name),1)):c("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[r(" Số điện thoại "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=n=>s.value.phone=n),id:"phone",class:b([{"border-red-500":l.value.phone},"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:"",pattern:"[0-9]{10}",placeholder:"0912345678"},null,2),[[p,s.value.phone]]),l.value.phone?(u(),i("p",K,o(l.value.phone),1)):c("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[r(" Email "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=n=>s.value.email=n),id:"email",class:b([{"border-red-500":l.value.email},"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:"",placeholder:"example@email.com"},null,2),[[p,s.value.email]]),l.value.email?(u(),i("p",L,o(l.value.email),1)):c("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[r(" Địa chỉ "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=n=>s.value.address=n),id:"address",class:b([{"border-red-500":l.value.address},"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"]),required:"",placeholder:"123 Đường ABC, Quận 1, TP.HCM"},null,2),[[p,s.value.address]]),l.value.address?(u(),i("p",O,o(l.value.address),1)):c("",!0)])])]),e("div",Y,[t[19]||(t[19]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," Yêu cầu đặc biệt ",-1)),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=n=>s.value.note=n),id:"specialRequests",rows:"4",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nhập yêu cầu đặc biệt của bạn (nếu có)..."},null,512),[[p,s.value.note]])])])])]),e("div",G,[e("div",W,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Tóm tắt đơn hàng",-1)),e("div",Z,[e("div",ee,[e("span",te,[t[21]||(t[21]=r("Người lớn (×",-1)),e("span",se,o(new Intl.NumberFormat("vi-VN").format(s.value.number_of_people)),1),t[22]||(t[22]=r(")",-1))]),e("span",le,o(new Intl.NumberFormat("vi-VN").format(s.value.number_of_people*d.value?.price)),1)]),t[23]||(t[23]=v('<div class="flex justify-between text-sm" id="summaryChildrenRow" style="display:none;" data-v-853c28a0><span class="text-gray-600" data-v-853c28a0>Trẻ em (×<span id="summaryChildren" data-v-853c28a0>0</span>)</span><span class="font-semibold" id="summaryChildrenPrice" data-v-853c28a0>0đ</span></div><div class="flex justify-between text-sm" id="summaryInfantsRow" style="display:none;" data-v-853c28a0><span class="text-gray-600" data-v-853c28a0>Em bé (×<span id="summaryInfants" data-v-853c28a0>0</span>)</span><span class="font-semibold" id="summaryInfantsPrice" data-v-853c28a0>0đ</span></div>',2))]),e("div",ae,[e("div",oe,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Tạm tính",-1)),e("span",ne,o(new Intl.NumberFormat("vi-VN").format(s.value.number_of_people*d.value?.price)),1)])]),e("div",re,[t[25]||(t[25]=e("span",{class:"text-lg font-bold text-gray-800"},"Tổng cộng",-1)),e("span",de,o(new Intl.NumberFormat("vi-VN").format(s.value.number_of_people*d.value?.price)),1)]),e("button",{type:"button",onClick:t[7]||(t[7]=n=>_()),class:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition mb-3"},[...t[26]||(t[26]=[e("i",{class:"fas fa-check-circle mr-2"},null,-1),r("Xác nhận đặt tour ",-1)])]),t[28]||(t[28]=e("button",{type:"button",onclick:"window.history.back()",class:"w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition"},[e("i",{class:"fas fa-arrow-left mr-2"}),r("Quay lại ")],-1)),t[29]||(t[29]=v('<div class="mt-6 p-4 bg-blue-50 rounded-lg" data-v-853c28a0><div class="flex items-start gap-3" data-v-853c28a0><i class="fas fa-info-circle text-blue-600 mt-1" data-v-853c28a0></i><div class="text-sm text-gray-700" data-v-853c28a0><p class="font-semibold mb-1" data-v-853c28a0>Chính sách đặt tour</p><ul class="space-y-1 text-xs" data-v-853c28a0><li data-v-853c28a0>• Miễn phí hủy trước 7 ngày</li><li data-v-853c28a0>• Hoàn 50% nếu hủy trước 3 ngày</li><li data-v-853c28a0>• Không hoàn tiền nếu hủy trong 24h</li></ul></div></div></div>',1))])])])]),e("div",ie,[e("div",ue,[e("div",me,[t[31]||(t[31]=e("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("i",{class:"fas fa-check-circle text-green-600 text-3xl"})],-1)),t[32]||(t[32]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Đặt tour thành công!",-1)),e("p",pe,[t[30]||(t[30]=r("Mã đặt tour của bạn là: ",-1)),e("span",be,o(f.value),1)]),t[33]||(t[33]=e("p",{class:"text-sm text-gray-600 mb-6"},"Chúng tôi đã gửi email xác nhận đến địa chỉ của bạn. Vui lòng kiểm tra hộp thư.",-1)),t[34]||(t[34]=e("div",{class:"flex gap-3"},[e("button",{onclick:"window.location.href='booking-history.html'",class:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700"}," Xem lịch sử "),e("button",{onclick:"window.location.href='index.html'",class:"flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50"}," Về trang chủ ")],-1))])])])]))}};typeof x=="function"&&x(y);const fe=k(y,[["__scopeId","data-v-853c28a0"]]);export{fe as default};
